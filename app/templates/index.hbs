<EsHeader />
<EsMain>
  <EsHeading>Upgrade Guide</EsHeading>
  <p>From version</p>
  <PowerSelect @options={{this.versions}} @disabled={{false}} @selected={{this.fromVersion}}
    @onChange={{fn (mut fromVersion)}} as |version|>
    {{version}}
  </PowerSelect>
  <br />
  <p>To version</p>
  <PowerSelect @options={{this.versions}} @disabled={{false}} @selected={{this.toVersion}}
    @onChange={{fn (mut toVersion)}} as |version|>
    {{version}}
  </PowerSelect>

  <h2>Upgrading from {{this.fromVersion}} to {{this.toVersion}}</h2>

  <CliUpdateCommands @toVersion={{this.toVersion}} />

  <h2>Ember.js</h2>
  <ListFeaturesDeprecations
    @datum={{this.model.emberJSChanges}}
    @toVersion={{this.toVersion}}
    @fromVersion={{this.fromVersion}} />

  <h2>Ember Data</h2>
  <ul>
    <h3>New Features</h3>
    {{#each this.model.emberDataChanges as |dataChange|}}
      {{#if (and (lte dataChange.version this.toVersion) (gt dataChange.version this.fromVersion))}}
        {{#each dataChange.changes as |change|}}
          {{#if change.feature}}
            <p>
              {{change.title}}: <a href={{change.link}}>More info</a> (Ember {{dataChange.version}})
            </p>
          {{/if}}
        {{/each}}
      {{/if}}
    {{/each}}
  </ul>
  <ul>
    <h3>Deprecations</h3>
    {{#each this.model.emberDataChanges as |dataChange|}}
      {{#if (and (lte dataChange.version this.toVersion) (gt dataChange.version this.fromVersion))}}
        {{#each dataChange.changes as |change|}}
          {{#if change.deprecation}}
            <p>
              {{change.title}}: <a href={{change.link}}>More info</a> (Ember {{dataChange.version}})
            </p>
          {{/if}}
        {{/each}}
      {{/if}}
    {{/each}}
  </ul>

  <h2>Ember CLI</h2>
  <ListFeaturesDeprecations
    @datum={{this.model.emberCLIChanges}}
    @toVersion={{this.toVersion}}
    @fromVersion={{this.fromVersion}} />
</EsMain>
<EsFooter />

{{outlet}}
